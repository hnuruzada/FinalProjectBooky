@model Book
@{
    ViewData["Title"] = "Create";
    List<Category> categories = (List<Category>)ViewBag.Categories;
    List<Tag> tags = (List<Tag>)ViewBag.Tags;
    List<Language> languages = (List<Language>)ViewBag.Languages;
    List<Author> authors = (List<Author>)ViewBag.Authors;
    List<Campaign> campaigns=(List<Campaign>)ViewBag.Campaigns;

    
    

}
@section CSS{
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
}

<div class="container-fluid mb-4">
    <form method="post" enctype="multipart/form-data">
        <div class="form-group">
            <label asp-for="@Model.ImageFile">Image</label>
            <input asp-for="@Model.ImageFile" accept="image/*" class="form-control col-md-2" rows="3">
            <span asp-validation-for="@Model.ImageFile" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="@Model.Name">Name</label>
            <input type="text" asp-for="@Model.Name" class="form-control" id="Name" placeholder="Name" rows="3">
            <span asp-validation-for="@Model.Name" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="@Model.Price">Price</label>
            <input type="number" asp-for="@Model.Price" class="form-control" id="Price" placeholder="Price" rows="3">
            <span asp-validation-for="@Model.Price" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="@Model.Date">Publish Time</label>
            <input type="date" asp-for="@Model.Date" class="form-control" id="Date" placeholder="Date" rows="3">
            <span asp-validation-for="@Model.Date" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="@Model.PageCount">Page Count</label>
            <input type="number" asp-for="@Model.PageCount" class="form-control" id="Page" placeholder="Page Count" rows="3">
            <span asp-validation-for="@Model.PageCount" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="@Model.LeftSideColor">Book Left Side Color</label>
            <input type="color" asp-for="@Model.LeftSideColor"  id="LeftSideColor" name="LeftSideColor" value="#ff0000" rows="3">
            <span asp-validation-for="@Model.LeftSideColor" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label asp-for="@Model.BackSideColor">Book Back Side Color</label>
            <input type="color" asp-for="@Model.BackSideColor"  id="BackSideColor" name="BackSideColor" value="#ff0000"  rows="3">
            <span asp-validation-for="@Model.BackSideColor" class="text-danger"></span>
        </div>
         <div class="form-group">
            <label asp-for="@Model.SkuCode">Sku Code</label>
            <input type="number" asp-for="@Model.SkuCode" class="form-control" id="skucode" placeholder="Skucode" rows="3">
            <span asp-validation-for="@Model.SkuCode" class="text-danger"></span>
        </div>
         <div class="mb-3">
            <label asp-for="@Model.InStock" class="form-label">In stock</label><br />
            <input asp-for="@Model.InStock"><br />
            <span class="mt-2 text text-danger" asp-validation-for="@Model.InStock"></span>
        </div>
        <div class="form-group">
            <label asp-for="@Model.Summary">Summary</label>
            <textarea asp-for="@Model.Summary" class="form-control" id="Summary" rows="3"></textarea>
            <span asp-validation-for="@Model.Summary" class="text-danger"></span>
        </div>
       <div class="mb-3">
            <label asp-for="@Model.CampaignId" class="form-label">Campaign</label>
            <select asp-for="@Model.CampaignId" class="form-select" asp-items="@(new SelectList(campaigns,"Id","DiscountPercent"))">
                <option value="0">Select campaign</option>
            </select>
            <span class="mt-2 text text-danger" asp-validation-for="@Model.CampaignId"></span>
        </div>
        <div class="mb-3">
            <label asp-for="@Model.LanguageId" class="form-label">Language</label>
            <select asp-for="@Model.LanguageId" class="form-select" asp-items="@(new SelectList(languages,"Id","Name"))">
                <option value="0">Select language</option>
            </select>
            <span class="mt-2 text text-danger" asp-validation-for="@Model.LanguageId"></span>
        </div>
        <div class="form-group col-md-3">
            <label asp-for="@Model.AuthorIds">Authors</label>
            <select class="form-control" asp-for="@Model.AuthorIds" asp-items="@(new SelectList(authors,"Id","Name"))">
            </select>
        </div>
        <div class="form-group col-md-3">
            <label asp-for="@Model.TagIds">Tags</label>
            <select multiple class="form-control" asp-for="@Model.TagIds" asp-items="@(new SelectList(tags,"Id","Name"))">
                

            </select>
        </div>
        <div class="form-group col-md-3">
            <label asp-for="@Model.CategoryIds">Categories</label>
            <select class="form-control" asp-for="@Model.CategoryIds" asp-items="@(new SelectList(categories,"Id","Name"))">
            </select>
        </div>

        





         <legend style="border-bottom:2px solid black;">Contents</legend>

            <div class="form-row col-12" id="content">
                <div class="form-group">
                    <label for="partOf">Part </label>
                    <input name="Contents[0].PartOf" type="text" />
                    <span class="text-danger"></span>

                    <label for="title">Title</label>
                    <input name="Contents[0].Title" type="text" />
                    <span class="text-danger"></span>

                    <label for="pageNumber">Page Number</label>
                    <input name="Contents[0].PageNumber" type="number" />
                    <span class="text-danger"></span>

                    <span><i class="fa-solid fa-square-minus delete-content" style="cursor:pointer"></i></span>
                </div>
            </div>
            <div class="form-row justify-content-center">
                <div class="form-group">
                    <button data-nextIndex="1" class="add-content btn btn-primary">+</button>
                </div>
            </div>

       
        <button type="submit" class="btn btn-primary">Submit</button>

         <a asp-controller="book" asp-action="index">

            <i style="font-size:0.875rem; text-decoration:none;" class="btn btn-dark">Back</i>
        </a>



    </form>


</div>



@section Scripts{ 
     <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.3/jquery.validate.min.js" integrity="sha512-37T7leoNS06R80c8Ulq7cdCDU5MNQBwlYoy1TX/WUsLFC2eYNqtKlV0QjH7r8JpG/S0GUMZwebnVFLPd6SU5yg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.12/jquery.validate.unobtrusive.min.js" integrity="sha512-o6XqxgrUsKmchwy9G5VRNWSSxTS4Urr4loO6/0hYdpWmFUfHqGzawGxeQGMDqYzxjY9sbktPbNlkIQJWagVZQg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script>
    $(document).ready(function () {
        $(document).on("click", ".add-content", function (e) {
            e.preventDefault();
            var nextIndex = $(this).attr("data-nextIndex");
            var inputGroup = ` <div class="form-group col-12" data-index="0">
                <label for="partOf">Part</label>
                <input name="Contents[`+ nextIndex+`].PartOf" type="text" />
                <span class="text-danger"></span>
                <label for="title">Title</label>
                <input name="Contents[`+ nextIndex+`].Title" type="text" />
                <span class="text-danger"></span>
                 <label for="pageNumber">Page Number</label>
                <input name="Contents[`+ nextIndex+`].PageNumber" type="number" />
                <span class="text-danger"></span>
                <span><i class="fa-solid fa-square-minus delete-content" style="cursor:pointer"></i></span>
            </div>`
            $("#content").append($(inputGroup))
            nextIndex = +nextIndex + 1;
            console.log(nextIndex)
            $(this).attr("data-nextIndex", nextIndex)
        })
        $(document).on("click", ".delete-content", function (e) {
            e.preventDefault();
            console.log("test");
            $(this).parents(".form-group").empty();
        })
    })
</script>
   
}
